(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a0764f2e"],{"0ae1":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("aside",[a("switch-roles")],1),a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"Name"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}}),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(" Search")]),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v(" Add")]),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"pan-btn green-btn",attrs:{loading:e.downloadLoading,size:"mini",type:"primary",icon:"el-icon-download"},on:{click:e.handleDownload}},[e._v(" Export")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{"row-key":"id",data:e.list,border:"",fit:"","highlight-current-row":"","row-class-name":e.tableRowClassName,"tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{label:"ID",prop:"id",sortable:"custom",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.id))])]}}])}),a("el-table-column",{attrs:{label:"Path",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.path))])]}}])}),a("el-table-column",{attrs:{label:"Component",width:"110px",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.component))])]}}])}),a("el-table-column",{attrs:{label:"Hidden",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.$index,i=t.row;return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#DCDFE6"},on:{change:function(t){return e.changeMenuSwitch(n,i)}},model:{value:i.hidden,callback:function(t){e.$set(i,"hidden",t)},expression:"row.hidden"}})]}}])}),a("el-table-column",{attrs:{label:"AlwaysShow",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.$index,i=t.row;return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#DCDFE6"},on:{change:function(t){return e.changeMenuSwitch(n,i)}},model:{value:i.alwaysShow,callback:function(t){e.$set(i,"alwaysShow",t)},expression:"row.alwaysShow"}})]}}])}),a("el-table-column",{attrs:{label:"Name",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.name))])]}}])}),a("el-table-column",{attrs:{label:"Meta",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleMetaView(n.meta)}}},[e._v(" "+e._s(n.meta)+" ")])]}}])}),a("el-table-column",{attrs:{label:"Actions",align:"center",width:"230","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,i=t.$index;return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:e.handleCreate}},[e._v("Add")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleUpdate(n)}}},[e._v("Edit")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(n,i)}}},[e._v("Delete")])]}}])})],1),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"420px","margin-left":"40px"},attrs:{size:"small",rules:e.rules,model:e.temp,"label-position":"left","label-width":"110px"}},[a("el-form-item",{attrs:{label:"Path",prop:"path"}},[a("el-input",{model:{value:e.temp.path,callback:function(t){e.$set(e.temp,"path",t)},expression:"temp.path"}})],1),a("el-form-item",{attrs:{label:"Component",prop:"component"}},[a("el-input",{model:{value:e.temp.component,callback:function(t){e.$set(e.temp,"component",t)},expression:"temp.component"}})],1),a("el-form-item",{attrs:{label:"Hidden",prop:"hidden"}},[a("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:e.temp.hidden,callback:function(t){e.$set(e.temp,"hidden",t)},expression:"temp.hidden"}})],1),a("el-form-item",{attrs:{label:"AlwaysShow",prop:"alwaysShow"}},[a("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:e.temp.alwaysShow,callback:function(t){e.$set(e.temp,"alwaysShow",t)},expression:"temp.alwaysShow"}})],1),a("el-form-item",{attrs:{label:"Name",prop:"name"}},[a("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消 ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v("提交")])],1)],1),a("el-dialog",{attrs:{title:"Meta",visible:e.metaVisible,"before-close":e.handleMetaClose},on:{"update:visible":function(t){e.metaVisible=t}}},[a("el-table",{attrs:{size:"small",data:e.metaList,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"Title",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.title))])]}}])}),a("el-table-column",{attrs:{label:"Icon",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("i",{class:t.icon}),a("svg-icon",{attrs:{"icon-class":t.icon}})]}}])}),a("el-table-column",{attrs:{label:"noCache",align:"center",width:"90","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.$index,i=t.row;return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#DCDFE6"},on:{change:function(t){return e.changeMetaSwitch(n,i)}},model:{value:i.noCache,callback:function(t){e.$set(i,"noCache",t)},expression:"row.noCache"}})]}}])}),a("el-table-column",{attrs:{label:"Breadcrumb",align:"center",width:"110","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.$index,i=t.row;return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#DCDFE6"},on:{change:function(t){return e.changeMetaSwitch(n,i)}},model:{value:i.breadcrumb,callback:function(t){e.$set(i,"breadcrumb",t)},expression:"row.breadcrumb"}})]}}])}),a("el-table-column",{attrs:{label:"AffixTag",align:"center",width:"80","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.$index,i=t.row;return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#DCDFE6"},on:{change:function(t){return e.changeMetaSwitch(n,i)}},model:{value:i.affix,callback:function(t){e.$set(i,"affix",t)},expression:"row.affix"}})]}}])}),a("el-table-column",{attrs:{label:"ActiveMenu",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.activeMenu))])]}}])})],1)],1)],1)},i=[],l=(a("d3b7"),a("ace4"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("a434"),a("4381")),o=(a("caad"),a("2532"),a("4360"));function s(e){if(e&&e instanceof Array&&e.length>0){var t=o["a"].getters&&o["a"].getters.roles,a=e,n=t.some((function(e){return a.includes(e)}));return!!n}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1}var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-bottom":"15px"}},[e._v(" roles : "+e._s(e.roles)+" ")])])},c=[],u={computed:{roles:function(){return this.$store.getters.roles}}},d=u,m=a("2877"),f=Object(m["a"])(d,r,c,!1,null,null,null),p=f.exports,h=a("6724"),w=a("1f27"),b={name:"Menu",components:{SwitchRoles:p},directives:{waves:h["a"],permission:l["a"]},filters:{statusFilter:function(e){var t={published:"success",draft:"info",deleted:"danger"};return t[e]}},data:function(){return{list:[],listLoading:!0,listQuery:{roles:[],key:!0},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"Edit",create:"Create"},metaVisible:!1,metaList:[],temp:{id:0,path:"",component:"Layout",name:"",hidden:!1,alwaysShow:!1,meta:{},children:[],metaId:0,parentId:0},rules:{type:[{required:!0,message:"type is required",trigger:"change"}],timestamp:[{type:"date",required:!0,message:"timestamp is required",trigger:"change"}],title:[{required:!0,message:"title is required",trigger:"blur"}]},downloadLoading:!1}},created:function(){this.getList()},methods:{checkPermission:s,getList:function(){var e=this;this.listLoading=!0,Object(w["b"])(this.listQuery).then((function(t){e.list=t.data})).finally((function(){e.listLoading=!1}))},handleFilter:function(){this.getList()},handleCreate:function(){this.dialogStatus="create",this.dialogFormVisible=!0},handleMetaView:function(e){this.metaVisible=!0,this.metaList.push(e)},handleMetaClose:function(e){this.metaList=[],e()},base64ToBlob:function(e){for(var t=window.atob(e),a=t.length,n=new Uint8Array(a),i=0;i<a;++i)n[i]=t.charCodeAt(i);return new Blob([n])},handleDownload:function(){var e=this;Object(w["a"])().then((function(e){console.log(e);var t=document.createElement("a"),a=document.createEvent("HTMLEvents");a.initEvent("click",!0,!0),t.download=e.headers.filename,t.href=URL.createObjectURL(e.data),t.dispatchEvent(a),t.click()})).catch((function(t){e.$message({type:"error",message:e.$t(t)})})).finally((function(){e.$message({type:"success",message:e.$t("download success")})}))},handleUpdate:function(e){this.temp=Object.assign({},e),this.temp.timestamp=new Date(this.temp.timestamp),this.dialogStatus="update",this.dialogFormVisible=!0},handleDelete:function(e,t){this.$notify({title:"Success",message:"禁止删除",type:"success",duration:2e3}),this.list.splice(t,1)},createData:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&(e.$notify({title:"Success",message:"禁止添加",type:"success",duration:2e3}),e.dialogFormVisible=!1)}))},updateData:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&(e.$notify({title:"Success",message:"禁止更新",type:"success",duration:2e3}),e.dialogFormVisible=!1)}))},changeMetaSwitch:function(e,t){var a=this;Object(w["d"])([t]).then((function(){a.getList(),a.$notify({title:"Success",message:"Update Successfully",type:"success",duration:2e3})}))},changeMenuSwitch:function(e,t){var a=this;Object(w["c"])([t]).then((function(){a.getList(),a.$notify({title:"Success",message:"Update Successfully",type:"success",duration:2e3})}))},tableRowClassName:function(e){return 0===e.row.parentId?"success-row":"warning-row"}}},v=b,g=(a("e5d4"),Object(m["a"])(v,n,i,!1,null,null,null));t["default"]=g.exports},"33fc":function(e,t,a){},e5d4:function(e,t,a){"use strict";a("33fc")}}]);