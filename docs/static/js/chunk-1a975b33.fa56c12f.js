(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a975b33"],{"3e10":function(e,t,n){"use strict";function i(e,t,n,i){var s=void 0!==window.screenLeft?window.screenLeft:screen.left,o=void 0!==window.screenTop?window.screenTop:screen.top,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,c=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,r=a/2-n/2+s,d=c/2-i/2+o,h=window.open(e,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, copyhistory=no, width="+n+", height="+i+", top="+d+", left="+r);window.focus&&h.focus()}n.d(t,"a",(function(){return i}))},9690:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"webgl",staticClass:"webgl_style",attrs:{id:"webgl"}})},s=[],o=(n("b0c0"),n("a9e3"),n("5a89")),a=n("4721"),c=n("4e15"),r=n("32d9"),d=n("93e9"),h=n("518e"),l=n("6c18"),m=n("360d"),u=n("b9d8"),w=n("3e10"),f={data:function(){return{renderer:"",scene:"",camera:"",controls:"",composer:"",effectFXAA:"",outlinePass:"",selectedObjects:[],raycaster:new o["I"],list:[],gui:new u["a"]({width:300}),GUIparams:{MeshName:"name"}}},mounted:function(){this.getList()},beforeDestroy:function(){this.gui.destroy()},methods:{getList:function(){this.init(),this.animate()},init:function(){this.initScene(),this.initCamera(),this.initLight(),this.Panel(),this.STLModel(),this.Box(),this.Model(),this.initGUI(),this.initRenender(),this.outlineSelect(),this.ininControl(),this.$refs.webgl.addEventListener("mousemove",this.onWindowResize),this.$refs.webgl.addEventListener("mousemove",this.launchHover)},initScene:function(){this.scene=new o["J"],this.scene.fog=new o["n"](this.scene.background,1,5e3)},initCamera:function(){this.camera=new o["D"](45,document.getElementById("webgl").clientWidth/document.getElementById("webgl").clientHeight,.1,5e3),this.camera.position.set(50,0,200),this.camera.lookAt(new o["Q"](0,0,0))},initLight:function(){var e=new o["b"](789516);this.scene.add(e);var t=new o["p"](16777215,16777215,.4);t.color.setHSL(.6,1,.6),t.groundColor.setHSL(.095,1,.75),t.position.set(0,50,0),this.scene.add(t);var n=new o["i"](16777215,1);n.color.setHSL(.1,1,.95),n.position.set(-1,1.75,1),n.position.multiplyScalar(30),this.scene.add(n),n.castShadow=!0,n.shadow.mapSize.width=2048,n.shadow.mapSize.height=2048;var i=50;n.shadow.camera.left=-i,n.shadow.camera.right=i,n.shadow.camera.top=i,n.shadow.camera.bottom=-i,n.shadow.camera.far=15e3,n.shadow.bias=-1e-4},STLModel:function(){var e=new h["a"],t="models/lj.stl",n=this;e.load(t,(function(e){var t=new o["z"]({color:"#69f"}),i=new o["v"](e,t);i.position.set(0,0,0),i.rotation.set(-Math.PI/2,0,0),i.scale.set(.01,.01,.01),i.castShadow=!0,i.receiveShadow=!0,i.name="货架",n.scene.add(i)}))},Box:function(){var e=new o["c"](5,3,5),t=new o["y"]({color:16693068,map:(new o["N"]).load("models/box.png")}),n=new o["v"](e,t);n.position.set(-16.5,12,0),n.name="货物$1",this.scene.add(n);var i=n.clone();i.position.set(-11,4,0),i.name="货物$2",this.scene.add(i);var s=n.clone();s.position.set(-5.5,4,0),s.name="货物$3",this.scene.add(s);var a=n.clone();a.position.set(0,12,0),a.name="货物$4",this.scene.add(a);var c=n.clone();c.position.set(5.5,20,0),c.name="货物$5",this.scene.add(c);var r=n.clone();r.position.set(11,4,0),r.name="货物$6",this.scene.add(r);var d=n.clone();d.position.set(16.5,20,0),d.name="货物$7",this.scene.add(d);var h=n.clone();h.position.set(-16.5,28,0),h.name="货物$8",this.scene.add(h);var l=n.clone();l.position.set(-11,16,0),l.name="货物$9",this.scene.add(l);var m=n.clone();m.position.set(-11,28,0),m.name="货物$10",this.scene.add(m);var u=n.clone();u.position.set(0,8,0),u.name="货物$11",this.scene.add(u);var w=n.clone();w.position.set(5.5,28,0),w.name="货物$12",this.scene.add(w);var f=n.clone();f.position.set(11,28,0),f.name="货物$13",this.scene.add(f);var p=n.clone();p.position.set(16.5,8,0),p.name="货物$14",this.scene.add(p)},ininControl:function(){this.controls=new a["a"](this.camera,this.renderer.domElement),this.controls.minDistance=5,this.controls.maxDistance=220,this.controls.maxPolarAngle=.4*Math.PI,this.controls.enablePan=!0,this.controls.enableDamping=!0,this.controls.dampingFactor=.05},initRenender:function(){this.renderer=new o["S"],this.renderer.shadowMap.enabled=!0,this.renderer.setClearColor(12178431,1),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(document.getElementById("webgl").clientWidth,document.getElementById("webgl").clientHeight),this.$refs.webgl.appendChild(this.renderer.domElement)},onWindowResize:function(){var e=document.getElementById("webgl");this.camera.aspect=e.clientWidth/e.clientHeight,this.renderer.setSize(e.clientWidth,e.clientHeight),this.camera.updateProjectionMatrix(),this.effectFXAA.uniforms["resolution"].value.set(1/e.clientWidth,1/e.clientHeight)},Panel:function(){var e=new o["o"](175,20,16777215,16777215);e.material.opacity=.5,e.material.transparent=!0,e.position.y=.005,this.scene.add(e);var t=new o["v"](new o["c"],new o["z"]({color:16777215,transparent:!0,opacity:.25})),n={x:0,y:-.25,z:0},i={x:175,y:.5,z:175};t.position.set(n.x,n.y,n.z),t.scale.set(i.x,i.y,i.z),t.receiveShadow=!0,t.name="地板",this.scene.add(t)},initGUI:function(){this.gui.domElement.style="position:absolute;top:0px;right:0px",this.gui.add(this.GUIparams,"MeshName").name("选中的物体名:").listen()},Model:function(){for(var e=new o["d"](5,5,5),t=new o["A"]({color:692630,roughness:.5,metalness:0,flatShading:!0}),n=0;n<this.list.length;n++){var i=new o["v"](e,t);i.position.x=80*Math.random()-10,i.position.y=2.5,i.position.z=80*Math.random()-10,i.updateMatrix(),i.matrixAutoUpdate=!1,i.name=this.list[n].factory+"-"+this.list[n].eqpId+"-"+this.list[n].vncip,i.userData=this.list[n],this.scene.add(i)}},outlineSelect:function(){this.composer=new r["a"](this.renderer);var e=new d["a"](this.scene,this.camera);this.composer.addPass(e);var t=document.getElementById("webgl");this.outlinePass=new c["a"](new o["P"](t.clientWidth,t.clientHeight),this.scene,this.camera),this.outlinePass.edgeStrength=Number(5),this.outlinePass.edgeThickness=Number(3.6),this.outlinePass.pulsePeriod=Number(2.9),this.outlinePass.visibleEdgeColor.set("#ffff00"),this.outlinePass.hiddenEdgeColor.set(16711680),this.composer.addPass(this.outlinePass),this.effectFXAA=new m["a"](l["a"]),this.effectFXAA.uniforms["resolution"].value.set(1/window.innerWidth,1/window.innerHeight),this.composer.addPass(this.effectFXAA),this.renderer.domElement.style.touchAction="none",this.$refs.webgl.addEventListener("pointermove",this.onPointerMove),this.$refs.webgl.addEventListener("click",this.onPointerMove)},onPointerMove:function(e){var t=new o["P"],n=document.getElementById("webgl"),i=n.getBoundingClientRect();t.x=(e.clientX-i.left)/n.offsetWidth*2-1,t.y=-(e.clientY-i.top)/n.offsetHeight*2+1,this.raycaster.setFromCamera(t,this.camera);var s=this.raycaster.intersectObject(this.scene,!0);if(s.length>0){var a=s[0].object;if(this.addSelectedObject(a),this.outlinePass.selectedObjects=this.selectedObjects,this.GUIparams.MeshName=s[0].object.name,"click"===e.type&&void 0!==s[0].object.userData.vncip&&void 0!==s[0].object.userData.vncPort){var c="http://"+s[0].object.userData.vncip+":"+s[0].object.userData.vncPort;Object(w["a"])(c,"thirdpart",800,540)}}else this.outlinePass.selectedObjects=[]},addSelectedObject:function(e){this.selectedObjects=[],this.selectedObjects.push(e)},launchHover:function(e){e.preventDefault();var t=new o["P"],n=document.getElementById("webgl"),i=n.getBoundingClientRect();t.x=(e.clientX-i.left)/n.offsetWidth*2-1,t.y=-(e.clientY-i.top)/n.offsetHeight*2+1;var s=new o["I"];s.setFromCamera(t,this.camera);var a=s.intersectObjects([this.scene],!0);a.length>0?document.querySelector("body").style.cursor="pointer":document.querySelector("body").style.cursor="default"},animate:function(){this.controls.update(),this.renderer.render(this.scene,this.camera),this.composer.render(),requestAnimationFrame(this.animate)}}},p=f,g=(n("f025"),n("2877")),v=Object(g["a"])(p,i,s,!1,null,null,null);t["default"]=v.exports},"9dfb":function(e,t,n){},f025:function(e,t,n){"use strict";n("9dfb")}}]);