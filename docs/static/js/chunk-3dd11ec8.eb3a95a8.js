(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dd11ec8"],{"0f69":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"用户名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(t)}},model:{value:e.listQuery.userName,callback:function(t){e.$set(e.listQuery,"userName",t)},expression:"listQuery.userName"}}),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询")]),i("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:["developer","admin"],expression:"['developer','admin']"}],staticClass:"filter-item",attrs:{size:"mini",icon:"el-icon-document-add",type:"primary"},on:{click:e.handleAdd}},[e._v(" 添加 ")])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{size:"small",data:e.tableData,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"Id",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",[e._v(e._s(a.id))])]}}])}),i("el-table-column",{attrs:{label:"UserName",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.$index,n=t.row;return[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleEdit(a,n)}}},[i("mallki",{attrs:{"class-name":"mallki-text",text:n.userName}})],1)]}}])}),e._e(),i("el-table-column",{attrs:{label:"NickName",align:"center",width:"110","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",[e._v(e._s(a.nickName))])]}}])}),i("el-table-column",{attrs:{label:"Mail",align:"center",width:"120","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",[e._v(e._s(a.eMail))])]}}])}),i("el-table-column",{attrs:{label:"Active",align:"center",width:"90","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.$index,n=t.row;return[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#DCDFE6"},on:{change:function(t){return e.changeSwitch(a,n)}},model:{value:n.active,callback:function(t){e.$set(n,"active",t)},expression:"row.active"}})]}}])}),e._e(),i("el-table-column",{attrs:{label:"Introduction",align:"center",width:"160","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",[e._v(e._s(a.introduction))])]}}])}),e._e(),i("el-table-column",{attrs:{label:"CreateTime",align:"center",width:"160","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",[e._v(e._s(e._f("parseTime")(a.createTime,"{y}-{m}-{d} {h}:{i}")))])]}}])}),i("el-table-column",{attrs:{label:"UpdateTime",align:"center",width:"160","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",[e._v(e._s(e._f("parseTime")(a.updateTime,"{y}-{m}-{d} {h}:{i}")))])]}}])}),i("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.$index,n=t.row;return[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["developer","admin"],expression:"['developer','admin']"}],attrs:{icon:"el-icon-edit-outline",type:"primary",size:"mini"},on:{click:function(t){return e.handleEdit(a,n)}}},[e._v("编辑")]),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["developer","admin"],expression:"['developer','admin']"}],attrs:{icon:"el-icon-delete",type:"danger",size:"mini"},on:{click:function(t){return e.handleDelete(a,n)}}},[e._v("删除")])]}}])})],1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}}),i("el-dialog",{attrs:{visible:e.dialogVisible,size:"small",title:"edit"===e.dialogType?"Edit":"New"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"用户基本信息",size:"small",name:"Tabs1"}},[i("el-form",{ref:"dataForm",staticStyle:{width:"420px","margin-left":"40px"},attrs:{rules:e.rules,model:e.entity,size:"small","label-width":"80px","label-position":"left"}},[i("el-form-item",{attrs:{prop:"nickName",label:"昵称"}},[i("el-input",{attrs:{placeholder:"请输入昵称"},model:{value:e.entity.nickName,callback:function(t){e.$set(e.entity,"nickName",t)},expression:"entity.nickName"}})],1),i("el-form-item",{attrs:{prop:"eMail",label:"邮件"}},[i("el-input",{attrs:{placeholder:"请输入邮箱地址"},model:{value:e.entity.eMail,callback:function(t){e.$set(e.entity,"eMail",t)},expression:"entity.eMail"}})],1),i("el-form-item",{attrs:{prop:"userName",label:"账号"}},[i("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.entity.userName,callback:function(t){e.$set(e.entity,"userName",t)},expression:"entity.userName"}})],1),i("el-form-item",{attrs:{prop:"password",label:"密码"}},[i("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.entity.password,callback:function(t){e.$set(e.entity,"password",t)},expression:"entity.password"}})],1)],1)],1),i("el-tab-pane",{attrs:{label:"用户权限信息",name:"Tabs2"}},[i("el-form",{staticStyle:{"margin-left":"50px"},attrs:{model:e.entity,size:"small","label-position":"left","label-width":"110px"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectRoles,callback:function(t){e.selectRoles=t},expression:"selectRoles"}},e._l(e.roles,(function(e){return i("el-option",{key:e.id,attrs:{label:e.paramName,value:e.paramName}})})),1),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticStyle:{"background-color":"#1890ff",color:"#fff"},attrs:{size:"small"},on:{click:function(t){return e.handleAddUserRoles()}}},[e._v(e._s(e.$t("table.add"))+" ")]),i("section",[i("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.entityRoles,size:"mini",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"Name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",[e._v(e._s(a.name))])]}}])}),i("el-table-column",{attrs:{label:"Description",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",[e._v(e._s(a.description))])]}}])}),i("el-table-column",{attrs:{label:"Actions",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row,n=t.$index;return[i("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"mini"},on:{click:function(t){return e.handleDeleteUserRoles(a,n)}}},[e._v("删除")])]}}])})],1)],1)],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.confirmEntity}},[e._v("确定")])],1)],1)],1)},n=[],s=i("c7eb"),l=i("1da1"),r=(i("d3b7"),i("159b"),i("a434"),i("c24f")),o=i("da71"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a",{staticClass:"link--mallki",class:e.className,attrs:{href:"#"}},[e._v(" "+e._s(e.text)+" "),i("span",{attrs:{"data-letters":e.text}}),i("span",{attrs:{"data-letters":e.text}})])},u=[],d={props:{className:{type:String,default:""},text:{type:String,default:""}}},m=d,p=(i("f0b6"),i("2877")),f=Object(p["a"])(m,c,u,!1,null,null,null),h=f.exports,v={id:void 0,userName:"",password:"",nickName:"",eMail:"",active:"",roles:[],rolesList:[],token:{id:void 0,userId:void 0,token:"",createTime:"",expireTime:""},introduction:"",avatar:"",remark:"",params:"",attr1:"",createUser:"",createTime:"",updateUser:"",updateTime:""},b={name:"User",components:{Mallki:h},data:function(){return{entity:Object.assign({},v),entityRoles:[],dialogVisible:!1,dialogType:"new",total:0,tableData:[],listLoading:!1,activeName:"Tabs1",selectRoles:void 0,roles:[],listQuery:{page:1,limit:10,userName:""},rules:{nickName:[{required:!0,message:"Code is required",trigger:"change"}],eMail:[{required:!0,message:"Code is required",trigger:"change"}],password:[{required:!0,message:"Code is required",trigger:"change"}],userName:[{required:!0,message:"Code is required",trigger:"change"}]}}},computed:{},created:function(){this.getList(),this.getListRoles()},methods:{getListRoles:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(o["a"])({configName:"Roles"}).then((function(t){e.roles=t.data.items}));case 1:case"end":return t.stop()}}),t)})))()},getList:function(){var e=this;this.listLoading=!0,Object(r["d"])(this.listQuery).then((function(t){e.tableData=t.data.items,e.total=t.data.total,e.listLoading=!1})).catch((function(){e.listLoading=!1}))},handleFilter:function(){this.listQuery.page=1,this.getList()},handleAdd:function(){this.dialogType="new",this.entity=Object.assign({},v),this.$router.push("/register")},handleEdit:function(e,t){this.dialogType="edit",this.dialogVisible=!0,this.entity=this.deepClone(t),this.entityRoles=this.entity.rolesList},handleAddUserRoles:function(){var e=this;this.roles.forEach((function(t){t.paramName===e.selectRoles&&e.entityRoles.push({id:t.id,userId:e.entity.id,name:t.paramValue,description:t.paramName})})),this.selectRoles=null},handleDeleteUserRoles:function(e,t){this.entityRoles.splice(t,1)},handleDelete:function(e,t){var i=this;this.entity=this.deepClone(t),this.$confirm(this.$t("tips.confirmDelete"),this.$t("tips.warning"),{confirmButtonText:this.$t("permission.confirm"),cancelButtonText:this.$t("permission.cancel"),type:"warning"}).then((function(){Object(r["b"])(i.entity).then((function(t){i.tableData.splice(e,1),i.$message({type:"success",message:i.$t("tips.actionSuccess")}),i.getList()}))})).catch((function(){}))},confirmEntity:function(){var e=this;this.$refs["dataForm"].validate(function(){var t=Object(l["a"])(Object(s["a"])().mark((function t(i){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!i){t.next=16;break}if("edit"!==e.dialogType){t.next=9;break}return e.entity.updateTime=new Date,e.entity.updateUser=e.$store.getters.userName,t.next=6,Object(r["g"])(e.entity).then((function(t){e.$notify({title:"Success",message:t.data.message,type:"success",duration:2e3}),e.dialogVisible=!1}));case 6:e.getList(),t.next=16;break;case 9:return e.entity.createTime=new Date,e.entity.createUser=e.$store.getters.userName,e.entity.updateTime=new Date,e.entity.updateUser=e.$store.getters.userName,t.next=15,Object(r["a"])(e.entity).then((function(t){e.$notify({title:"Success",message:t.data.message,type:"success",duration:2e3}),e.dialogVisible=!1}));case 15:e.getList();case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},changeSwitch:function(e,t){var i=this;this.entity=this.deepClone(t),this.entity.updateTime=new Date,this.entity.updateUser=this.$store.getters.userName,Object(r["g"])(this.entity).then((function(e){i.$notify({title:"Success",message:e.data.message,type:"success",duration:2e3}),i.dialogVisible=!1,i.getList()}))}}},g=b,y=Object(p["a"])(g,a,n,!1,null,null,null);t["default"]=y.exports},da49:function(e,t,i){},da71:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var a=i("b775");function n(e){return Object(a["a"])({url:"/Admin/Config/GetConfig",method:"post",data:e,params:e})}},f0b6:function(e,t,i){"use strict";i("da49")}}]);